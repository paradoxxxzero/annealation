(()=>{var q=(s,c,A,m,h,w,B,F,r,e,d)=>{if(isNaN(s[c+6])){let o=s[c+1];if(o!==null&&o!==A){let f=A*3,t=o*3,y=r[t]-r[f],u=r[t+1]-r[f+1],g=r[t+2]-r[f+2],n=y*y+u*u+g*g,a=Math.sqrt(n+h);w&&n<F&&B.push([A,o]);let M=d[o]/(a*a*a);e[f]+=M*y,e[f+1]+=M*u,e[f+2]+=M*g}}else{let o=A*3,f=s[c+3]-r[o],t=s[c+4]-r[o+1],y=s[c+5]-r[o+2],u=Math.sqrt(f*f+t*t+y*y);if(s[c]/u<m){let n=s[c+2]/(u*u*u);e[o]+=n*f,e[o+1]+=n*t,e[o+2]+=n*y}else for(let n=0,a=8;n<a;n++)q(s,s[c+n+6],A,m,h,w,B,F,r,e,d)}};onmessage=function(s){let[c,A,m,h,w,B,F,r,e,d,o]=s.data,f=new Float32Array(e),t=new Float32Array(r),y=new Float32Array(d),u=new Float32Array(o),g=[];for(let n=c;n<A;n++){let a=n*3;t[a]=0,t[a+1]=0,t[a+2]=0,q(u,0,n,m,w,B,g,F,f,t,y),t[a]*=h,t[a+1]*=h,t[a+2]*=h}postMessage([r,c,A,g])};})();
